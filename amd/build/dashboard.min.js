define("report_dashboard/dashboard",["exports","jquery","report_dashboard/dataTables","report_dashboard/dataTables.bootstrap4","report_dashboard/dataTables.select"],(function(_exports,_jquery,_dataTables,_dataTables2,_dataTables3){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}
/**
   * TODO describe module dashboard
   *
   * @module     report_dashboard/dashboard
   * @copyright  2025 Andrew Rowatt <A.J.Rowatt@massey.ac.nz>
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_jquery=_interopRequireDefault(_jquery),_dataTables=_interopRequireDefault(_dataTables);_exports.init=()=>{(0,_jquery.default)((function(){var table=new _dataTables.default("#report_dashboard_dashboard",{orderCellsTop:!0,responsive:!1,autoWidth:!0,layout:{topStart:"info",topEnd:null,bottomStart:"pageLength",bottonEnd:"paging"},columnDefs:[{orderable:!1,render:_dataTables.default.render.select(),targets:0}],select:{style:"multi",headerCheckbox:"select-page"},order:[[1,"asc"]]});_jquery.default.fn.dataTable.ext.search.push((function(settings,data,dataIndex){let row=(0,_jquery.default)(table.row(dataIndex).node()),lastaccessed=document.querySelector("input[name='lastaccessed']:checked");if(document.querySelector("#lastaccessed > button > span").textContent=lastaccessed.dataset.label,"all"!=lastaccessed.value&&0==row.find(`td.tc_lastaccessed span[data-filter-category="${lastaccessed.value}"]`).length)return!1;let groupmatch=!1,groups=document.querySelectorAll("input[name='groups']"),groupschecked=document.querySelectorAll("input[name='groups']:checked").length,anygroupunchecked=groups.length!=groupschecked,dropdownlabel="Unknown";for(const group of groups)if(group.checked&&(dropdownlabel=group.dataset.label,row.find(`td.tc_groups span[data-filter-category="${group.value}"]`).length>0)){groupmatch=!0;break}if(document.getElementById("group_select_all").disabled=!anygroupunchecked,document.getElementById("group_select_none").disabled=0==groupschecked,0==groupschecked?dropdownlabel="None":1==groupschecked||(dropdownlabel=anygroupunchecked?"Multiple Groups":"All"),document.querySelector("#group > button > span").textContent=dropdownlabel,!groupmatch)return!1;let lateassessments=document.querySelector("input[name='lateassessments']:checked");if(document.querySelector("#lateassessments > button > span").textContent=lateassessments.dataset.label,"all"!=lateassessments.value&&0==row.find(`td.tc_lateassessments span[data-filter-category="${lateassessments.value}"]`).length)return!1;let earlyengagementFilters=document.querySelectorAll(".earlyengagement_filter");for(const earlyengagementFilter of earlyengagementFilters){let id=earlyengagementFilter.dataset.earlyengagementid,itemMatch=!1,items=document.querySelectorAll(`input[name='earlyengagement${id}_filter']`),itemsChecked=document.querySelectorAll(`input[name='earlyengagement${id}_filter']:checked`).length,anyUnchecked=items.length!=itemsChecked,dropdownlabel="Unknown";for(const item of items)if(item.checked&&(dropdownlabel=item.dataset.label,row.find(`td.tc_earlyengagement.earlyengagement${id} span[data-filter-category="${item.value}"]`).length>0)){itemMatch=!0;break}if(document.getElementById(`earlyengagement${id}_select_all`).disabled=!anyUnchecked,document.getElementById(`earlyengagement${id}_select_none`).disabled=0==itemsChecked,0==itemsChecked?dropdownlabel="None":1==itemsChecked?console.log("1 item checked!"):dropdownlabel=anyUnchecked?"Multiple criteria":"All",document.querySelector(`#earlyengagement${id} > button > span`).textContent=dropdownlabel,!itemMatch)return!1}let assessmentFilters=document.querySelectorAll(".assessment_filter");for(const assessmentFilter of assessmentFilters){let id=assessmentFilter.dataset.assessmentid,itemMatch=!1,items=document.querySelectorAll(`input[name='assessment${id}_filter']`),itemsChecked=document.querySelectorAll(`input[name='assessment${id}_filter']:checked`).length,anyUnchecked=items.length!=itemsChecked,dropdownlabel="Unknown";for(const item of items)if(item.checked&&(dropdownlabel=item.dataset.label,row.find(`td.tc_assessment.assessment${id} span[data-filter-category="${item.value}"]`).length>0)){itemMatch=!0;break}if(document.getElementById(`assessment${id}_select_all`).disabled=!anyUnchecked,document.getElementById(`assessment${id}_select_none`).disabled=0==itemsChecked,0==itemsChecked?dropdownlabel="None":1==itemsChecked?console.log("1 item checked!"):dropdownlabel=anyUnchecked?"Multiple criteria":"All",document.querySelector(`#assessment${id} > button > span`).textContent=dropdownlabel,!itemMatch)return!1}return!0})),(0,_jquery.default)("#name_filter").on("input",(function(){table.columns(1).search(this.value).draw()})),(0,_jquery.default)("tr.filters .earlyengagement_filter .dropdown-menu").on("click",(e=>{let id=e.currentTarget.dataset.earlyengagementid;switch(e.target.id){case`earlyengagement${id}_select_all`:document.querySelectorAll(`input[name='earlyengagement${id}_filter']`).forEach((item=>{item.checked=!0}));break;case`earlyengagement${id}_select_none`:document.querySelectorAll(`input[name='earlyengagement${id}_filter']`).forEach((item=>{item.checked=!1}))}})),(0,_jquery.default)("tr.filters .assessment_filter .dropdown-menu").on("click",(e=>{let id=e.currentTarget.dataset.assessmentid;switch(e.target.id){case`assessment${id}_select_all`:document.querySelectorAll(`input[name='assessment${id}_filter']`).forEach((item=>{item.checked=!0}));break;case`assessment${id}_select_none`:document.querySelectorAll(`input[name='assessment${id}_filter']`).forEach((item=>{item.checked=!1}))}})),(0,_jquery.default)("tr.filters .dropdown-menu").on("click",(e=>{switch(e.target.id){case"group_select_all":document.querySelectorAll("input[name='groups']").forEach((group=>{group.checked=!0}));break;case"group_select_none":document.querySelectorAll("input[name='groups']").forEach((group=>{group.checked=!1}))}table.draw()}))}))}}));

//# sourceMappingURL=dashboard.min.js.map