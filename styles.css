#page-report-dashboard-index {
    #region-main {
        max-width: 100%;
    }

    .gap-1 {
        gap: 0.25em;
    }

    .gap-2 {
        gap: 0.5em;
    }

    .gap-3 {
        gap: 1em;
    }

    label {
        font-weight: 400;
    }
}

.dashboard_header {
    .markdown {
        p {
            margin-bottom: 0;
        }

        ul {
            margin-bottom: 0;
            padding-inline-start: 1.2em;
        }
    }
}


.dashboard_container {
    position: relative;

    /* Hide the raw table before DataTables wraps it */
    > table {
        display: none;
    }

    /* Hide DataTables wrapper until initialised */
    .dt-container {
        display: none;
    }

    /* Once ready, show DataTables and hide skeleton */
    &.dt-ready .dt-container {
        display: block;
    }

    &.dt-ready .dashboard_skeleton {
        display: none;
    }

    .course_group_container {
        max-height: calc(10 * 37px); /* Show max 10 groups, each row is 37px high including borders */
        overflow: hidden auto;
    }
}

.dashboard_skeleton {
    border: 1px solid #eee;
    border-radius: 4px;
    overflow: hidden;
}

.dashboard_skeleton_info {
    padding: 6px 10px;
}

.dashboard_skeleton_info_pill {
    width: 200px;
    height: 20px;
    background: linear-gradient(90deg, #e8e8e8 25%, #f2f2f2 50%, #e8e8e8 75%);
    background-size: 200% 100%;
    animation: skeleton-shimmer 1.5s ease-in-out infinite;
    border-radius: 4px;
}

.dashboard_container.dt-ready .dashboard_skeleton_info {
    display: none;
}

.dashboard_skeleton_header {
    display: flex;
    gap: 1px;
    background-color: #eee;
    padding: 6px 2px;
}

.dashboard_skeleton_header_cell {
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: flex-start;
    padding: 0 8px;
}

.dashboard_skeleton_header_cell::after {
    content: "";
    display: block;
    width: 70%;
    height: 14px;
    background: linear-gradient(90deg, #d5d5d5 25%, #e4e4e4 50%, #d5d5d5 75%);
    background-size: 200% 100%;
    animation: skeleton-shimmer 1.5s ease-in-out infinite;
    border-radius: 12px;
}

.dashboard_skeleton_header_cell:first-child {
    flex: 0.3;
    justify-content: center;
}

.dashboard_skeleton_header_cell:first-child::after {
    width: 18px;
    height: 18px;
    border-radius: 3px;
}

.dashboard_skeleton_filter_cell {
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: flex-start;
    gap: 6px;
    padding: 0 8px;
}

.dashboard_skeleton_filter_cell:first-child {
    flex: 0.3;
}

.dashboard_skeleton_filter_name::after {
    content: "";
    display: block;
    width: 80%;
    height: 14px;
    background: linear-gradient(90deg, #d5d5d5 25%, #e4e4e4 50%, #d5d5d5 75%);
    background-size: 200% 100%;
    animation: skeleton-shimmer 1.5s ease-in-out infinite;
    border-radius: 4px;
}

.dashboard_skeleton_filter_single::after {
    content: "";
    display: block;
    width: 50px;
    height: 14px;
    background: linear-gradient(90deg, #d5d5d5 25%, #e4e4e4 50%, #d5d5d5 75%);
    background-size: 200% 100%;
    animation: skeleton-shimmer 1.5s ease-in-out infinite;
    border-radius: 12px;
}

.dashboard_skeleton_filter_double::before,
.dashboard_skeleton_filter_double::after {
    content: "";
    display: block;
    width: 50px;
    height: 14px;
    background: linear-gradient(90deg, #d5d5d5 25%, #e4e4e4 50%, #d5d5d5 75%);
    background-size: 200% 100%;
    animation: skeleton-shimmer 1.5s ease-in-out infinite;
    border-radius: 12px;
}

.dashboard_skeleton_row {
    display: flex;
    gap: 1px;
    padding: 6px 2px;
    border-bottom: 1px solid #f0f0f0;
}

.dashboard_skeleton_row:nth-child(odd) {
    background-color: #f9f9f9;
}

.dashboard_skeleton_cell {
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: flex-start;
    padding: 0 8px;
}

.dashboard_skeleton_cell::after {
    content: "";
    display: block;
    width: 60%;
    height: 20px;
    background: linear-gradient(90deg, #e8e8e8 25%, #f2f2f2 50%, #e8e8e8 75%);
    background-size: 200% 100%;
    animation: skeleton-shimmer 1.5s ease-in-out infinite;
    border-radius: 12px;
}

.dashboard_skeleton_cell:first-child {
    flex: 0.3;
    justify-content: center;
}

.dashboard_skeleton_cell:first-child::after {
    width: 18px;
    height: 18px;
    border-radius: 3px;
}

.dashboard_skeleton_cell:nth-child(2)::after {
    width: 80%;
    border-radius: 4px;
}

@keyframes skeleton-shimmer {
    0% {
        background-position: 200% 0;
    }

    100% {
        background-position: -200% 0;
    }
}

#report_dashboard_dashboard {
    --positive: #c5e0b4;
    --warning: #fff2cc;
    --negative: #fbe4d5;
    --note: #d9edf7;
    --note2: rgb(248, 243, 252);
    --note3: rgb(244, 238, 238);
    --neutral: #00000007;
    --dt-row-selected-text: #000;
    --dt-row-selected: 220, 220, 220;

    table-layout: auto;
    width: auto;
    border-collapse: separate;
    border-spacing: 0;

    th {
        /* Apply both top and bottom borders to the <th> */
        border-left: none;
        border-top: 1px solid #eee;
        border-bottom: 1px solid #eee;
        border-right: 1px solid #eee;
    }

    td {
        /* For cells, apply the border to one of each side only (right but not left, bottom but not top) */
        border-left: none;
        border-top: none;
        border-bottom: 1px solid #eee;
        border-right: 1px solid #eee;
    }

    th:first-child,
    td:first-child {
        /* Apply a left border on the first <td> or <th> in a row */
        border-left: 1px solid #eee;
    }

    tr {
        content-visibility: auto;
        contain-intrinsic-size: auto 48px;
    }

    thead {
        position: sticky;
        top: 0;
        z-index: 1052; /* Above the Boost fixed header and just below the modal default of 1052 */

        th {
            background-color: #eee;
            padding-bottom: 0;

            .dt-column-title:not(:has(.dropdown)) {
                font-weight: 500;
                max-width: 20ch;
            }
        }

        tr.filters th {
            padding-top: 0;
            border-bottom: 1px solid #999;
            padding-bottom: 0.75rem;
        }
    }

    &.sz-11 {
        font-size: 11px;

        td {
            padding: 0.4rem;
        }
    }

    &.sz-12 {
        font-size: 12px;

        td {
            padding: 0.4rem;
        }
    }

    &.sz-13 {
        font-size: 13px;

        td {
            padding: 0.4rem;
        }
    }

    &.sz-14 {
        font-size: 14px;

        td {
            padding: 0.5rem;
        }
    }

    &.sz-16 {
        font-size: 16px;
        td {
            padding: 0.6rem;
        }
    }

    span.rdbtag {
        border-radius: 12px;
        padding: 2px 8px;
        display: inline-block;
        text-align: center;
        border: 1px solid #0002;
        min-width: 3em;
        white-space: nowrap;
        background-color: #fff7;

        &.compact {
            padding: 2px 6px;
            min-width: auto;
        }
    }

    label.form-check-label:has(span:empty.rdbtag) {
        /* To ensure the circle is on the right-margin */
        width: 100%;

        /* To ensure the circle does make the dropdown-item wrap 2em = width 1.5 + margin-left 0.5 */
        margin-right: 2em;
    }

    /* If empty, rdbtag is rendered as an empty coloured circle */
    span:empty.rdbtag {
        display: block;
        min-width: 1.5em;
        width: 1.5em;
        height: 1.5em;
        margin-left: 0.5em;
        float: right;
    }

    div.rdbtag-group {
        display: flex;
        justify-content: flex-start;
        gap: 0.5em;
    }

    .tools {
        display: none;
        position: absolute;
        left: 80%;
        top: -20%;
        height: 140%;
        background-color: var(--neutral);
        padding: 0 1em;
        border: 1px solid #0001;
        border-radius: 4px;

        >* {
            margin: 1em 0;
        }
    }

    .tc_name {
        > div {
            display: flex;
            flex-direction: row;
            gap: 0.3em;

            .firstname,
            .lastname {
                max-width: 15em;
                text-overflow: ellipsis;
                overflow: hidden;
                white-space: nowrap;
            }
        }

        a.email-link {
            &::after {
                /* stylelint-disable-next-line function-url-scheme-disallowed-list */
                content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512'%3E%3C!--!Font Awesome Free v6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--%3E%3Cpath d='M64 112c-8.8 0-16 7.2-16 16l0 22.1L220.5 291.7c20.7 17 50.4 17 71.1 0L464 150.1l0-22.1c0-8.8-7.2-16-16-16L64 112zM48 212.2L48 384c0 8.8 7.2 16 16 16l384 0c8.8 0 16-7.2 16-16l0-171.8L322 328.8c-38.4 31.5-93.7 31.5-132 0L48 212.2zM0 128C0 92.7 28.7 64 64 64l384 0c35.3 0 64 28.7 64 64l0 256c0 35.3-28.7 64-64 64L64 448c-35.3 0-64-28.7-64-64L0 128z'/%3E%3C/svg%3E");
                display: block;
                width: 0.8em;
                opacity: 0.5;
            }
        }

        &:hover a.email-link::after {
            opacity: 1;
        }
    }

    .tc_name:hover {
        .tools {
            display: flex;
            gap: 1em;
            align-items: center;
        }
    }

    tr.filters,
    .tc_lastaccessed {
        span.rdbtag {
            &[data-filter-category="never"],
            &[data-filter-category="over4week"] {
                background-color: var(--negative);
            }

            &[data-filter-category="today"],
            &[data-filter-category="yesterday"],
            &[data-filter-category="1week"] {
                background-color: var(--positive);
            }

            &[data-filter-category="over1week"],
            &[data-filter-category="over2week"],
            &[data-filter-category="over3week"] {
                background-color: var(--warning);
            }
        }
    }

    tr.filters,
    .tc_groups {
        span.rdbtag {
            max-width: 10em;
            text-overflow: ellipsis;
            overflow: hidden;

            &.rdbtag-course-group {
                background-color: var(--note2);
            }

            &.rdbtag-cohort-group {
                background-color: var(--note3);
            }

            &.rdbtag-priority-group {
                background-color: var(--note);
            }

            &.rdbtag-previousenrolments {
                background-color: var(--warning);
            }
        }
    }

    tr.filters,
    .tc_lateassessments {
        span.rdbtag {
            &[data-filter-category="yes"] {
                background-color: var(--negative);
            }

            &[data-filter-category="no"] {
                background-color: var(--positive);
            }
        }
    }

    tr.filters,
    .tc_earlyengagement,
    .tc_assessment {
        span.rdbtag {
            &[data-filter-category="notdue"] {
                background-color: var(--neutral);
            }

            &[data-filter-category="submitted"] {
                background-color: var(--positive);
            }

            &[data-filter-category="completed"] {
                background-color: var(--positive);
            }

            &[data-filter-category="overdue"] {
                background-color: var(--negative);
            }

            &[data-filter-category="passed"] {
                background-color: var(--positive);
            }

            &[data-filter-category="failed"] {
                background-color: var(--negative);
            }

            &[data-filter-category="extension"] {
                background-color: var(--note);
            }

            &[data-filter-category="notcompleted"] {
                background-color: var(--note);
            }

            &[data-filter-category="viewed"] {
                background-color: var(--positive);
            }

            &[data-filter-category="notviewed"] {
                background-color: var(--note);
            }

            &[data-filter-category="notviewed"][data-assessmentstatus="overdue"] {
                background-color: var(--negative);
            }

            &[data-filter-category="notviewed"][data-earlyengagementstatus="overdue"] {
                background-color: var(--negative);
            }
        }
    }

    .tc_assessment {
        span.rdbtag:where([data-filter-category="passed"], [data-filter-category="failed"]) {
            &::after {
                content: "%";
                font-size: 0.8em;
                color: #0007;
                padding-left: 0.1em;
            }
        }
    }

    [data-filter-count]::after {
        content: "(showing " attr(data-filter-count) " of " attr(data-filter-total) ")";
        font-size: smaller;
        color: #6a737b;
        margin-left: .25em;
    }

    [data-filter-total="0"][data-filter-count="0"]::after {
        content: "(none)";
    }
}

#report_dashboard_dashboard_wrapper {
    > :last-child {
        position: sticky;
        bottom: 0;
        background: white;
        z-index: 1;
        width: 100%;
        padding: 1em;
        border-radius: 1em 1em 0 0;
        box-shadow: 0 -8px 8px rgba(0, 0, 0, 0.1);
    }

    :is(.pagination, .dt-length, .dt-info) {
        font-size: .75rem;
    }
}
