{{!
    This file is part of Moodle - http://moodle.org/

    Moodle is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    Moodle is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with Moodle.  If not, see <http://www.gnu.org/licenses/>.
}}
{{!
    @template report_dashboard/index

    Page shell template for the dashboard â€” renders header, skeleton loader,
    and placeholder for the asynchronously loaded data table.

    Example context (json):
    {
        "description": "<p>Welcome to the Course Engagement Dashboard</p>",
        "instructions": "<p>Use filters to find students who need support.</p>",
        "limitations": "<p>Data is updated every 24 hours.</p>",
        "knownissues": "<p>Some grades may be delayed.</p>",
        "supportcontact": "<a href='mailto:support@example.com'>Contact Support</a>",
        "courseid": 123,
        "sesskey": "abc123def456",
        "hiddenearlyengagements": [],
        "hiddenassessments": [],
        "rows": [{"skeleton": true}, {"skeleton": true}],
        "fontsize": 14,
        "fontsizes": [
            {"value": 12, "label": "Small", "selected": false},
            {"value": 14, "label": "Default", "selected": true}
        ]
    }
}}
<div class="dashboard_header">
    {{{description}}}
    <div class="instructions_buttons mb-2 d-flex align-items-center markdown gap-2">
        {{#instructions}}
        <a class="btn btn-outline-info btn-sm" data-toggle="collapse" href="#collapseInstructions" role="button" aria-expanded="false" aria-controls="collapseInstructions">
            {{#str}} instructions, report_dashboard {{/str}}
        </a>
        {{/instructions}}
        {{#limitations}}
        <a class="btn btn-outline-info btn-sm" data-toggle="collapse" href="#collapseLimitations" role="button" aria-expanded="false" aria-controls="collapseLimitations">
            {{#str}} limitations, report_dashboard {{/str}}
        </a>
        {{/limitations}}
        <a class="btn btn-{{^knownissues}}success{{/knownissues}}{{#knownissues}}info{{/knownissues}} btn-sm" data-toggle="collapse" href="#collapseKnownissues" role="button" aria-expanded="false" aria-controls="collapseKnownissues">
        {{#knownissues}}<i class="fa fa-info-circle disabled" aria-hidden="true"></i>{{/knownissues}} {{#str}} knownissues, report_dashboard {{/str}}
        </a>
        {{{supportcontact}}}
        <label class="mb-0 ml-auto d-flex align-items-center gap-1">
            <i class="fa-solid fa-text-height"></i><span class="sr-only">{{#str}} fontsize, report_dashboard {{/str}}</span>
            <select id="report_dashboard_fontsize" class="custom-select custom-select-sm" style="width: auto;" disabled>
                {{#fontsizes}}
                <option value="{{value}}" {{#selected}}selected{{/selected}}>{{label}}</option>
                {{/fontsizes}}
            </select>
        </label>
    </div>
    <div class="collapse" id="collapseInstructions">
    <div class="card card-body markdown">
        {{{instructions}}}
    </div>
    </div>
    <div class="collapse" id="collapseLimitations">
    <div class="card card-body markdown">
        {{{limitations}}}
    </div>
    </div>
    <div class="collapse" id="collapseKnownissues">
    <div class="card card-body markdown">
        {{^knownissues}}{{#str}} noknownissues, report_dashboard {{/str}}{{/knownissues}}{{#knownissues}}{{{knownissues}}}{{/knownissues}}
    </div>
    </div>
</div>
<div class="dashboard_container">
    <div class="d-flex flex-row justify-content-end mb-1 gap-2">
    {{#hiddenearlyengagements}}
    <form><input type="hidden" name="id" value="{{courseid}}"><input type="hidden" name="sesskey" value="{{sesskey}}"><input type="hidden" name="action" value="showitem"><input type="hidden" name="cmid" value="{{cmid}}"><button type="submit" class="btn btn-outline-primary btn-sm" disabled><i class="fa fa-eye" aria-hidden="true"></i> Show early engagement activity {{name}}</button></form>
    {{/hiddenearlyengagements}}
    {{#hiddenassessments}}
    <form><input type="hidden" name="id" value="{{courseid}}"><input type="hidden" name="sesskey" value="{{sesskey}}"><input type="hidden" name="action" value="showitem"><input type="hidden" name="cmid" value="{{cmid}}"><button type="submit" class="btn btn-outline-primary btn-sm" disabled><i class="fa fa-eye" aria-hidden="true"></i> Show assessment {{name}}</button></form>
    {{/hiddenassessments}}
    </div>
    <div class="dashboard_skeleton_info"><div class="dashboard_skeleton_info_pill"></div></div>
    <div class="dashboard_skeleton">
        <div class="dashboard_skeleton_header">
            <div class="dashboard_skeleton_header_cell"></div>
            <div class="dashboard_skeleton_header_cell"></div>
            <div class="dashboard_skeleton_header_cell"></div>
            <div class="dashboard_skeleton_header_cell"></div>
            <div class="dashboard_skeleton_header_cell"></div>
            <div class="dashboard_skeleton_header_cell"></div>
            <div class="dashboard_skeleton_header_cell"></div>
        </div>
        <div class="dashboard_skeleton_header dashboard_skeleton_filters">
            <div class="dashboard_skeleton_filter_cell"></div>
            <div class="dashboard_skeleton_filter_cell dashboard_skeleton_filter_name"></div>
            <div class="dashboard_skeleton_filter_cell dashboard_skeleton_filter_single"></div>
            <div class="dashboard_skeleton_filter_cell dashboard_skeleton_filter_single"></div>
            <div class="dashboard_skeleton_filter_cell dashboard_skeleton_filter_double"></div>
            <div class="dashboard_skeleton_filter_cell dashboard_skeleton_filter_double"></div>
            <div class="dashboard_skeleton_filter_cell dashboard_skeleton_filter_double"></div>
        </div>
        {{#rows}}<div class="dashboard_skeleton_row">
            <div class="dashboard_skeleton_cell"></div>
            <div class="dashboard_skeleton_cell"></div>
            <div class="dashboard_skeleton_cell"></div>
            <div class="dashboard_skeleton_cell"></div>
            <div class="dashboard_skeleton_cell"></div>
            <div class="dashboard_skeleton_cell"></div>
            <div class="dashboard_skeleton_cell"></div>
        </div>{{/rows}}
    </div>
</div>
